
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Sample Signature Code (C#)"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>
<meta name="DC.Relation" scheme="URI" content="../tasks/api_signing_requests_appendix.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="signature_csharp"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="http://help-ooyala.brightcove.com/../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="http://help-ooyala.brightcove.com/../css/ooyala.css"/>
<title>サンプル署名コード（C＃）</title>
</head>
<body id="signature_csharp">


 <h1 class="title topictitle1">サンプル署名コード（C＃）</h1>

 
 <div class="body refbody"><p class="shortdesc"/>

  <div class="section">
   <p class="p">以下は、署名を生成するためのC＃サンプルコードです。</p>

   <pre class="pre codeblock">
システムを使用します。 System.Collections.Genericを使用します。 System.Security.Cryptographyを使用します。 System.Textを使用します。 System.Webを使用する。 パブリッククラスOoyalaAPI {public const String BaseURL = &quot;https://api.ooyala.com&quot;; /// &lt;summary&gt; /// Ooyala API用のV2シグネチャを構築するために必要なパラメーターを取り込む/// &lt;/summary&gt; /// &lt;param name = &quot;apiKey&quot;&gt; /// Ooyala用のAPIキーURLを生成するアカウント。 このキーはBacklot /// &lt;/param&gt; /// &lt;param name = &quot;secretKey&quot;&gt; ///のDevelopersタブにあります。/// URLを生成するOoyalaアカウントの秘密キー。 このキーは、Backlot /// &lt;/param&gt; /// &lt;param name = &quot;HTTPMethod&quot;&gt; ///の[開発者]タブにあります。///リクエストに使用されるメソッド。 可能な値は以下のとおりです。GET、POST、PUT、PATCH、またはDELETE /// &lt;/param&gt; /// &lt;param name = &quot;path&quot;&gt; ///要求に使用するパス/// &lt;/param&gt; // / &lt;param name = &quot;parameters&quot;&gt; ///リクエストに含まれるパラメータのリストを含むハッシュ。 /// &lt;/param&gt; /// &lt;param name = &quot;body&quot;&gt; ///要求に応じて送信されるデータのJSON表現を含む文字列。 GETリクエストの場合、bodyパラメータは署名の生成には使用されません。 /// &lt;/param&gt; /// &lt;returns&gt; /// HTTPリクエストで使用されるURL。 /// &lt;/returns&gt; public String generateURL（文字列apiKey、文字列secretKey、文字列HTTPMethod、文字列パス、辞書&lt;System.String、System.String&gt;パラメータ、文字列本体）{var url = BaseURL + path; parameters.Add（ &quot;api_key&quot;、apiKey）; //キーの並べ替えvar sortedKeys = new String [parameters.Keys.Count]; parameters.Keys.CopyTo（sortedKeys、0）; Array.Sort（sortedKeys）; for（int i = 0; i &lt;sortedKeys.Length; i ++）{url + =（i == 0？ &quot;？&quot;： &quot;＆&quot;）+ sortedKeys [i] + &quot;=&quot; +パラメータ[sortedKeys [i]] ; url + = &quot;＆signature =&quot; + this.generateRequestSignature（secretKey、HTTPMethod、path、sortedKeys、parameters、body）; URLを返します。 public String generateRequestSignature（String secretKey、String HTTPMethod、String path、String [] sortedParameterKeys、Dictionary &lt;String、String&gt;パラメータ、Stringボディ）{var StringToSign = secretKey + HTTPMethod + path;} for（int i = 0; i &lt;sortedParameterKeys.Length; i ++）{StringToSign + = sortedParameterKeys [i] + &quot;=&quot; + parameters [sortedParameterKeys [i]]; stringToSign + = body; var sha256 = new SHA256Managed（）; byte [] digest = sha256.ComputeHash（Encoding.ASCII.GetBytes（StringToSign））; 文字列signedInput = Convert.ToBase64String（ダイジェスト）; //末尾の=記号を削除するvar lastEqualsSignIndex = signedInput.Length  -  1; while（signedInput [lastEqualsSignIndex] == &#39;=&#39;）{lastEqualsSignIndex--; signedInput = signedInput.SubString（0、lastEqualsSignIndex + 1）; HttpUtility.UrlEncode（signedInput.SubString（0、43））を返します。 }}

   </pre>

  </div>

 </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>親トピック</strong> <a class="link" href="../tasks/api_signing_requests_appendix.html" title="リクエストに署名するためのさまざまなプログラミング言語のサンプルコードの集まりです。">署名要求のサンプルコード</a></div>
</div>
</div>

<script data-cfasync="false" src="https://tdns6.gtranslate.net/tdn-bin/queue.js"></script><!-- Yandex.Metrika counter for GTranslate --><script data-cfasync="false">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter36618640 = new Ya.Metrika({ id:36618640, clickmap:true, trackLinks:true, accurateTrackBounce:true, ut:"noindex" }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/36618640?ut=noindex" style="position:absolute; left:-9999px;" alt="" /></div></noscript></body>
</html>
<!--