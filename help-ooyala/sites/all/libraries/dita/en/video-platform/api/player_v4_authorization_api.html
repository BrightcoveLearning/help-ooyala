<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Player Authorization API for Player V4"/>
<meta name="abstract" content="The Authorization API request is a key element in Ooyala's content protection features. This topic refers to Player V4."/>
<meta name="description" content="The Authorization API request is a key element in Ooyala's content protection features. This topic refers to Player V4."/>
<meta name="DC.Relation" scheme="URI" content="../concepts/authorization_overview.html"/>
<meta name="DC.Relation" scheme="URI" content="../concepts/book_authz_api.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="reference_authzpv4"/>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../css/ooyala.css"/>
<title>Player Authorization API for Player V4</title>
</head>
<body id="reference_authzpv4">


	<h1 class="title topictitle1">Player Authorization API for Player V4</h1>

	 
	<div class="body refbody"><p class="shortdesc">The Authorization API request is a key element in Ooyala's content protection features.
    This topic refers to Player V4.</p>

		<div class="section"><div class="note note"><span class="notetitle">Note:</span> This API applies to Player V4. For  more information on the Player Authorization API for
			Player V3, see <a class="xref" href="player_v3_authorization_api.html" title="The Authorization API request is a key element of Ooyala's content protection features. This topic refers to Player V3 (deprecated).">Player Authorization API for Player V3 (Deprecated)</a>.</div>
</div>

<div class="section"><h2 class="title sectiontitle">Authorization API Documentation</h2> Refer to the following documentation: <ul class="ul">
        <li class="li"><a class="xref" href="https://docs.brightcove.com/apidocs-ooyala/content_protection_api/authorization_api/index.html" target="_blank">Authorization API Reference</a> for details about
          making requests</li>

        <li class="li"><a class="xref" href="../concepts/authorization_errors.html" title="This page provides a reference table for Authorization Error codes that could be returned by the Authorization API.">Authorization Errors</a> for the error codes
          returned in the response</li>

        <li class="li"><a class="xref" href="../concepts/authorization_overview.html">Authorization</a> for an overview </li>

      </ul>
</div>

	  <div class="section"><h2 class="title sectiontitle">Request Syntax</h2>
	<p class="p">A request to the Authorization API has the following syntax:</p>
	
	  	<p class="p"><samp class="ph codeph">[GET] /sas/player_api/v2/authorization/embed_code/{pcode}/{embed_codes}?{query_params}</samp></p>

	<p class="p">Example:</p>
<p class="p"><samp class="ph codeph">http://player.ooyala.com/sas/player_api/v2/authorization/embed_code/Z5Mm06XeZlcDlfU_1R9v_L2KwYG6/44azdwNDpSWUvfd8F30d55tXY0YH9njH?codecPriority=avc&amp;device=html5&amp;domain=debug.ooyala.com&amp;supported_formats=m3u8,hds&amp;player_type=video</samp></p>

</div>

<div class="section"><h2 class="title sectiontitle">Route Attributes</h2>
			
			<div class="p">The following table describes all attributes of the route.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_authzpv4__table_mwz_25c_jj" class="table" frame="border" border="1" rules="all">
						
						
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" width="50%" id="d98510e90">Attribute</th>

								<th class="entry" valign="top" width="50%" id="d98510e93">Description</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e90 ">{pcode}</td>

								<td class="entry" valign="top" width="50%" headers="d98510e93 ">The provider code</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e90 ">{embed_codes}</td>

								<td class="entry" valign="top" width="50%" headers="d98510e93 ">Single embedcode or multiple embedcodes separated by ',' or '|'</td>

							</tr>

						</tbody>

					</table>
</div>
</div>

		</div>

<div class="section"><h2 class="title sectiontitle">Query String Parameters </h2>
			<div class="p">The following table describes the query string parameters of the routes. The request can have
				several optional query string parameters. The only required parameter is
					<samp class="ph codeph">domain</samp>.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_authzpv4__table_xfj_glc_jj" class="table" frame="border" border="1" rules="all">
						
						
						
						
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" width="25%" id="d98510e147">Parameter</th>

								<th class="entry" valign="top" width="25%" id="d98510e150">Description</th>

								<th class="entry" valign="top" width="25%" id="d98510e153">Required?</th>

								<th class="entry" valign="top" width="25%" id="d98510e156">Values</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
							  <td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">domain</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">Domain of the player embed.</td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">Yes</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "> </td>

							</tr>

							<tr class="row">
							  <td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">timestamp</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">Timestamp in which the request was made (epoch
										time).<p class="p">Default: Time request received by
									server</p>
</td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "> </td>

							</tr>

							<tr class="row">
							  <td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">supported_formats</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">List of comma-separated values indicating supported formats.
									The value of this parameter is normally tightly coupled with the
									device type, since support for formats is limited by device.
										<p class="p">Valid Values: Shown in table below</p>
</td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "> </td>

							</tr>

							<tr class="row">
							  <td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">jsonp</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">Value of this parameter will be used as the wrapper in
									returning JSONP. <p class="p">Default: JSON</p>
</td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "> </td>

							</tr>

							<tr class="row">
							  <td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">embed_token</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">Discussed in section "Ooyala Player Token" in the <em class="ph i">Player
										Developer Guide</em>. </td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "> </td>

							</tr>

							<tr class="row">
							  <td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">auth_token</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">Authorization token, discussed in <a class="xref" href="../concepts/player_v3_concurrent_stream_limits.html" title="By default, your Ooyala Backlot provider account limits each viewer account to 2 concurrent streams. This feature discourages viewers from sharing their credentials with friends who don’t have accounts. If the viewer, or someone with their account credentials, tries to open an additional stream while the maximum number of streams is open, the player displays a message and refuses to open the stream. This default limit applies across all of the syndication groups (aka publishing rules) within your provider account. You change this limit, and you can enable or disable the limit on a per-group basis. You can also enable or disable this setting for the default group. You can change your Ooyala Backlot provider account limit. You can also set this type of limit at the asset level. For example, your provider account limit could be 3, and your asset-level limit could be 1. In this case, three friends or family members could log in using the same credentials and watch three different assets concurrently, but would be blocked from watching any particular asset concurrently.">Limiting Concurrent Streams per Viewer</a></td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "> </td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">codecPriority</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">Value for HEVC codec.</td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "><samp class="ph codeph">hvc</samp> (default), <samp class="ph codeph">hec</samp>, <samp class="ph codeph">avc</samp>, <samp class="ph codeph">all</samp>.</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">player_type</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">The type of player for content playback. A <samp class="ph codeph">video</samp> player is capable
									to play both video and audio content, and an
										<samp class="ph codeph">audio_only</samp> player, as the name suggests, is
									only capable of playing audio content.</td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "><samp class="ph codeph">video</samp> (default), <samp class="ph codeph">audio_only</samp>.</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="25%" headers="d98510e147 "><samp class="ph codeph">device</samp></td>

								<td class="entry" valign="top" width="25%" headers="d98510e150 ">The device for which the authorization is being made. The value of this parameter is
									tightly coupled with the <samp class="ph codeph">{supported_formats}</samp> parameter since
									some formats are not supported for specific devices.</td>

								<td class="entry" valign="top" width="25%" headers="d98510e153 ">No (automatically assigned according to the device used for the request)</td>

								<td class="entry" valign="top" width="25%" headers="d98510e156 "><samp class="ph codeph">generic_flash</samp> (default), <samp class="ph codeph">iphone</samp>, <samp class="ph codeph">ipad</samp>, <samp class="ph codeph">appletv</samp> (or <samp class="ph codeph">apple_tv</samp>), <samp class="ph codeph">ios</samp>, <samp class="ph codeph">chromecast</samp>, <samp class="ph codeph">android_sdk</samp>, <samp class="ph codeph">android_html</samp>, <samp class="ph codeph">android_3plus_sdk</samp>, <samp class="ph codeph">android_hls_sdk</samp>, <samp class="ph codeph">html5</samp>, <samp class="ph codeph">hook</samp>, <samp class="ph codeph">dlna</samp>, <samp class="ph codeph">generic</samp>.</td>

							</tr>

						</tbody>

					</table>
</div>
</div>

			</div>

		<div class="section"><h2 class="title sectiontitle">Supported Formats and Devices</h2>
			 The <samp class="ph codeph">supported_formats</samp>
			parameter can be a list of any of the following values, separated by commas. A stream
			for each format specified in the supported_formats parameter is returned. If the
				<samp class="ph codeph">supported_formats</samp> parameter is blank, streams for all available
			formats are returned.<div class="p">
				
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_authzpv4__table_ymx_smc_jj" class="table" frame="border" border="1" rules="all">
						
						
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" width="50%" id="d98510e422">Format</th>

								<th class="entry" valign="top" width="50%" id="d98510e425">Value</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">DASH</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">dash</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">HDS</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">hds</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">RTMP</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">rtmp</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">HLS</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">m3u8</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">MP4</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">mp4</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">Akamai HD</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">akamai_hd</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">Fairplay HLS</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">fps</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">Widevine WVM (Widevine Classic, deprecated)</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">wv_wvm</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">Adobe Access HLS</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">faxs_hls</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">Microsoft Smooth Streaming</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">smooth</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">M4A</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">audio</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e422 ">OGG</td>

								<td class="entry" valign="top" width="50%" headers="d98510e425 "><samp class="ph codeph">audio</samp></td>

							</tr>

						</tbody>

					</table>
</div>

			</div>
<p class="p">If the query parameter <samp class="ph codeph">player_type</samp> is set to
					<samp class="ph codeph">audio_only</samp>, only the following three values are supported:</p>
<div class="p">
				
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_authzpv4__table_ymx_smc_vv" class="table" frame="border" border="1" rules="all">
						
						
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" width="50%" id="d98510e579">Format</th>

								<th class="entry" valign="top" width="50%" id="d98510e582">Value</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e579 ">AAC</td>

								<td class="entry" valign="top" width="50%" headers="d98510e582 "><samp class="ph codeph">audio_hls</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e579 ">M4A</td>

								<td class="entry" valign="top" width="50%" headers="d98510e582 "><samp class="ph codeph">audio_m4a</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d98510e579 ">OGG</td>

								<td class="entry" valign="top" width="50%" headers="d98510e582 "><samp class="ph codeph">audio_ogg</samp></td>

							</tr>

						</tbody>

					</table>
</div>

			</div>

		</div>

		<div class="section"><h2 class="title sectiontitle">Response from the Authorization API</h2>
<p class="p">When the caller makes an authorization request, the Authorization API responds to the caller with
				a JSON array indicating the authorization status for each of the embed codes. The
				following is a sample response from the Authorization API: </p>

			
			<pre class="pre codeblock">{
    "authorization_data": {
        "44azdwNDpSWUvfd8F30d55tXY0YH9njH": {
            "authorized": true,
            "code": "0",
            "message": "authorized",
            "request_timestamp": "1549578650",
            "retry": null,
            "synd_rule_failures": null,
            "require_mid_stream_check": false,
            "require_heartbeat": false,
            "restrict_devices": false,
            "is_cmaf": false,
            "streams": [
                {
                    "delivery_type": "hds",
                    "url": {
                        "format": "encoded",
                        "data": "aHR0cDovL2NmLmMub295YWxhLmNvbS80NGF6ZHdORHBTV1V2ZmQ4RjMwZDU1dFhZMFlIOW5qSC80NGF6ZHdORHBTV1V2ZmQ4RjMwZDU1dFhZMFlIOW5qSF8xLmY0bQ=="
                    }
                },
                {
                    "delivery_type": "hls",
                    "url": {
                        "format": "encoded",
                        "data": "aHR0cDovL3BsYXllci5vb3lhbGEuY29tL2hscy9wbGF5ZXIvYWxsLzQ0YXpkd05EcFNXVXZmZDhGMzBkNTV0WFkwWUg5bmpILm0zdTg/dGFyZ2V0Qml0cmF0ZT0yMDAw"
                    }
                }
            ]
        }
    },
    "user_info": {
        "ip_address": "",
        "domain": "",
        "request_timestamp": "",
        "device": "",
        "postal_code": "",
        "country": "",
        "timezone": "",
        "continent": "",
        "state": "",
        "city": "",
        "latitude": "",
        "longitude": ""
    },
    "debug_data": {
        "server_latency": "32.298190999999996",
        "request_id": "9b8e2b9d0b8c89d42078c874702e95dc",
        "user_info": {
            "request_timestamp": ""
        },
        "provider_enabled_ssl": true,
        "provider_not_use_cookies": false
    },
    "signature": "fhLQIE2H8WUxwY90xEg0wB5pcQ4jvYMU1j7cLel2J/E="
}</pre>


		</div>


		<div class="section"><h2 class="title sectiontitle">Elements of the Response </h2>
			<p class="p">Among the elements returned in the response:</p>
<ul class="ul">
				  <li class="li"><samp class="ph codeph">debug_data</samp> is used only for debugging data. It can change at any time.</li>

				  <li class="li"><samp class="ph codeph">signature</samp> in the response is used to ensure that the response has not been tampered with by
					a 3rd party.</li>

				  <li class="li"><samp class="ph codeph">streams</samp> are included if the embed code was authorized, including the
          base64 encoded url to access those streams. Each stream can return with an authorization
          result, which is described in <a class="xref" href="../concepts/authorization_errors.html" title="This page provides a reference table for Authorization Error codes that could be returned by the Authorization API.">Authorization Errors</a>.</li>
</ul>

		</div>
<div class="section"><p class="p">For per-viewer concurrent stream limits, additional properties are returned, as
			detailed in <a class="xref" href="../concepts/player_v3_concurrent_stream_limits.html" title="By default, your Ooyala Backlot provider account limits each viewer account to 2 concurrent streams. This feature discourages viewers from sharing their credentials with friends who don’t have accounts. If the viewer, or someone with their account credentials, tries to open an additional stream while the maximum number of streams is open, the player displays a message and refuses to open the stream. This default limit applies across all of the syndication groups (aka publishing rules) within your provider account. You change this limit, and you can enable or disable the limit on a per-group basis. You can also enable or disable this setting for the default group. You can change your Ooyala Backlot provider account limit. You can also set this type of limit at the asset level. For example, your provider account limit could be 3, and your asset-level limit could be 1. In this case, three friends or family members could log in using the same credentials and watch three different assets concurrently, but would be blocked from watching any particular asset concurrently.">Limiting Concurrent Streams per Viewer</a>.</p>
</div>
</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../concepts/authorization_overview.html">Authorization</a></div>
</div>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../concepts/book_authz_api.html" title="Authorization API is a set of application programming interfaces (APIs) for authorizing users.">Authorization API Reference</a></div>
</div>
</div>

</body>
</html>