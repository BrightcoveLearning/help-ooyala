<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Integrating VAST Ads with Player V3"/>
<meta name="DC.Relation" scheme="URI" content="../reference/ads_ref_vast.html"/>
<meta name="DC.Relation" scheme="URI" content="ads_integration_overview.html"/>
<meta name="DC.Relation" scheme="URI" content="../concepts/book_ads_integration.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="ads_dev_vast"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../css/ooyala.css"/>
<title>Integrating VAST Ads with Player V3</title>
</head>
<body id="ads_dev_vast">


 <h1 class="title topictitle1">Integrating VAST Ads with Player V3</h1>


 <div class="body conbody">
   <div class="section"><h2 class="title sectiontitle">Overview</h2>
            The following documentation describes the VAST integration with
            Player V3. For documentation on the VAST integration with Player V4, see <a class="xref" href="pbv4_ads_dev_chapter_vast.html">VAST and VPAID Ad Plugin</a>. </div>

        <div class="section">VAST is an ad format defined by the Interactive Advertising Bureau (<a class="xref" href="http://www.iab.com/guidelines/digital-video-ad-serving-template-vast-3-0/" target="_blank">IAB</a>). VAST uses XML to describe
            linear ads (video ads), non-linear ads (overlay ads) and companion ads. Ooyala’s V3
            video player is VAST 2.0 compliant, which means that you can use the ad tags of this
            standard to run overlays as well as pre-, mid- and post-rolls on your video content.
                <p class="p">To see which ad types are supported for VAST, see <a class="xref" href="ads_dev_chapter_vast.html">Player V3 VAST 2.0 Ad Integration</a>.</p>

            <p class="p">After you enable VAST ads for your account, you can associate VAST ad tags with your
                videos. You must create an ad set in Backlot for your VAST ads, and can optionally
                specify embedded parameters at the page level of a Flash or HTML5 player. </p>

            <div class="note note"><span class="notetitle">Note:</span> The VAST ad set can't handle VPAID creative, and VPAID ads module can't handle
                VAST responses. </div>
</div>

  <div class="section"><h2 class="title sectiontitle">Prerequisites</h2>
      <p class="p">Before you can use Ooyala's VAST ad integration, you need to log into the <a class="xref" href="../../../../../../../contact.html" target="_blank">Customer Portal</a> and submit a ticket requesting to add the
                VAST ad source to your account. Once the ad source is enabled you'll be able to
                create ad sets for VAST.</p>
</div>

     <div class="section">
     
</div>

  
   <div class="section"><h2 class="title sectiontitle">Step 1: Create an Ad Set with Backlot</h2>
       
     <p class="p">For VAST ads, you always need to create an ad set with Backlot. You can create an ad set
                through the Backlot UI or API. </p>

            <p class="p"><strong class="ph b">Backlot UI</strong>: For instructions on how to create an ad set using the Backlot UI,
                see <a class="xref" href="../tasks/monetization_ads_adsets_integratingadnetworks.html" title="Instead of using your own assets, you can work with other ad sources.">Creating Ad Sets for Integrating with Ad
                    Sources</a>. </p>

            <p class="p"><strong class="ph b">Backlot API</strong>: For instructions on how to create an ad set with the Backlot API,
                see <a class="xref" href="../api/ad_sets.html" title="Ad sets are ad configurations that control the ad experience of an asset during playback.">Ad Sets</a>.</p>

            <div class="note note"><span class="notetitle">Note:</span> For Ad Source you can choose between VAST Compliant In-Stream and VAST Compliant
                Overlay.</div>

            <div class="p">The ad set fields for creating a VAST Compliant In-Stream ad set are: <ul class="ul" id="ads_dev_vast__vast_fields">
                    <li class="li"><em class="ph i">Ad Set name</em>: You will enter a name for the ad set. </li>

                    <li class="li"><em class="ph i">Ad Tag</em>: You will input your VAST 2.0 ad tag here (this is provided by
                        an ad server).</li>

                    <li class="li"><em class="ph i">Ad Position</em>: Define where in the video stream the VAST ad should
                        appear: <ul class="ul">
                            <li class="li">Pre-roll </li>

                            <li class="li">In-stream (mid-roll): Include the time in seconds where the VAST tag
                                will be called. </li>

                            <li class="li">Post-roll </li>

                        </ul>
</li>

                    <li class="li"><em class="ph i">Tracking Pixel URL</em>: Use this field to track impressions using your
                        own or a 3rd-party URL.</li>

                    <li class="li"><em class="ph i">Ad Frequency</em>: Use this field to define how frequently the VAST tag
                        should be called.</li>

                </ul>

            </div>

            <div class="p">The fields for creating a VAST Compliant Overlay ad set are: <ul class="ul">
                    <li class="li"><em class="ph i">Ad Set name</em>: You will enter a name for the ad set. </li>

                    <li class="li"><em class="ph i">Ad Tag</em>: You will input your VAST 2.0 ad tag here (this is provided by
                        an ad server).</li>

                    <li class="li"><em class="ph i">Tracking Pixel URL</em>: Use this field to track impressions using your
                        own or a 3rd-party URL.</li>

                    <li class="li"><em class="ph i">Ad Position</em>: Define the time (in seconds) where the overlay ad should
                        appear. </li>

                    <li class="li"><em class="ph i">Ad Frequency</em>: Use this field to define how frequently the VAST tag
                        should be called. </li>

                </ul>

            </div>

           </div>

     <div class="section"><h2 class="title sectiontitle">Step 2: Assign the Ad Set to an Asset with Backlot or the Player API</h2>
         
           Assign an ad set to an asset or multiple assets using the Backlot UI, Player API, or
                    Backlot API. <p class="p"><strong class="ph b">Backlot UI</strong>: For instructions on how to assign your VAST
                        ad set to a single asset, see <a class="xref" href="../tasks/asset_manage_monetization.html" title="You can monetize your content using advertisements or create a pay-per-view experience using paywalls.">Managing
                            Monetization</a>. For instructions on how to assign your VAST ad set
                        to multiple assets, see <a class="xref" href="../tasks/asset_bulk.html" title="You can use the Backlot UI to apply settings to more than one asset at a time.">Bulk Applying Settings</a>. </p>
<p class="p"><strong class="ph b">Player API</strong>: With the
                        Player API you can only associate an ad set with an asset on your web page.
                        To associate an ad set with an asset on multiple players you must replicate
                        the code for each player. To associate an ad set with an asset using the
                        Player API, see <a class="xref" href="player_v3_dev_assignadset.html" title="The player enables you to assign ad sets dynamically.">Assigning Ad Sets Dynamically</a>. </p>
<p class="p"><strong class="ph b">Backlot API</strong>: With
                        the Backlot API you can associate an ad set with an asset more concretely.
                        That is, when you associate an asset with an ad set using the Backlot API
                        the asset and the ad set will be paired together on any player and page you
                        play the asset on. To associate an asset with an ad set using the Backlot
                        API, see <a class="xref" href="../api/asset_ad_set.html" title="You can associate ad sets with videos, live streams, and remote assets. For information about creating ad sets, refer to the Backlot User Guide.">Associate Ad Set
                            with Asset</a>.</p>

       
   </div>

     <div class="section"><h2 class="title sectiontitle">(Optional) Step 3: Specify Player Embedded Parameters</h2>
         
         <div class="p">You can optionally specify player embedded parameters for VAST ads.<ol class="ol">
                    <li class="li">Use the Player V3 <var class="keyword varname">OO.Player.create</var> function to create the
                        player. See <a class="xref" href="../tasks/player_v3_dev_adsetoocreate.html" title="Player V3 enables you to assign ad sets dynamically with OO.Player.create and the adSetCode parameter.">Assigning an Ad Set with OO.Player.create</a> for
                        instructions on how to use <var class="keyword varname">OO.Player.create</var>.</li>

                    <li class="li">Specify the ad set code from your Backlot ad set with the <var class="keyword varname">adSetCode</var>
                        parameter. See <a class="xref" href="../tasks/player_v3_dev_adsetoocreate.html" title="Player V3 enables you to assign ad sets dynamically with OO.Player.create and the adSetCode parameter.">Assigning an Ad Set with OO.Player.create in Player V3 (Deprecated)</a> for instructions for how to retrieve your <var class="keyword varname">adSetCode</var>.<div class="note note"><span class="notetitle">Note:</span> The ad set code identifier is not available by default for security reasons. Please contact your Customer Success Manager or Technical Support to enable this feature for your account.</div>
</li>

                    <li class="li">Pass VAST ad tags to the Ooyala player using the <var class="keyword varname">vast</var> and
                            <var class="keyword varname">tagUrl</var> embedded parameters. <var class="keyword varname">tagUrl</var>
                        correlates with the Ad Tag field. <var class="keyword varname">vast</var> is the parent of
                            <var class="keyword varname">tagUrl</var> and any other parameters you want to
                        specify.</li>

                    <li class="li">Specify additional embedded parameters. For the full list of parameters you
                        can use with <var class="keyword varname">vast</var>, see <a class="xref" href="#ads_dev_vast__vast_fields">Ad Set Fields</a>.</li>

                </ol>
The following is an example of creating the player and using the
                    <var class="keyword varname">vast</var> parameter.</div>

         <pre class="pre codeblock">var videoPlayer = OO.Player.create("playerwrapper","embed_code",{
    height:"100%",
    width:"100%",
    adSetCode: "your Backlot ad set code",
    "vast":{
        tagUrl: "some url"
     }    
  });</pre>

     </div>

   <div class="section"><h2 class="title sectiontitle">Special Case: VAST Companion Ads</h2>
     <div class="p">Inserting VAST companion ads requires additional JavaScript to render the companion and a
                div that represents the companion ad placement or placements on the page. To
                implement VAST companion ads: <ol class="ol">
                    <li class="li">Include a reference to the Ooyala VAST Companion JS template file on your
                        own server in the header of your page. You can download the template <a class="xref" href="http://ads.demo.ooyala.com/js/ooyala_companion_ads.js" target="_blank">here</a>.</li>

                    <li class="li">Add inline JS required by the ad source example. <div class="note note"><span class="notetitle">Note:</span> The following call
                            should only be made after the WILL_SHOW_COMPANION_ADS event has been
                            fired.</div>
Make a call to
                        <pre class="pre codeblock"> ooyalaVASTCompanionAds.ooyalaShowVASTCompanionAd(&lt;div id&gt;, &lt;reference to ad in ads_object&gt;, &lt;width&gt;, &lt;height&gt;) </pre>

                        to display the companion ad. <div class="p">For example: <pre class="pre codeblock">&lt;script&gt;
    OO.Player.create(‘ooyalaplayer’, &lt; some_embed_code &gt; , {
        onCreate: function(player) {
            player.mb.subscribe(OO.EVENTS.WILL_SHOW_COMPANION_ADS, ‘example’, function(event, ads_objects) {

                ooyalaVASTCompanionAds.ooyalaShowVASTCompanionAd(‘companion1’, ads_objects[“ads”][0], ‘120 px’, ‘60 px’);
                ooyalaVASTCompanionAds.ooyalaShowVASTCompanionAd(‘companion2’, ads_objects[“ads”][1], ‘200 px’, ‘200 px’);
            });
        }

    });
&lt;/script&gt;</pre>
</div>
</li>

                    <li class="li">Specify the companion div and its locations by including an empty div in the
                        body of your page with the id of 'companion' where you would like the
                        companion to appear. By default, VAST ads will display the first companion
                        ad returned in the XML. For example,
                        <pre class="pre codeblock">&lt;div id="companion1"&gt;&lt;/div&gt;</pre>
</li>

                </ol>
</div>

     <p class="p">A full example is shown below.</p>

     <div class="p"><pre class="pre codeblock">&lt;!DOCTYPE HTML&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
    &lt;title&gt;VAST Sample&lt;/title&gt;
    &lt;script src="//PATH/TO/YOUR/DOMAIN/ooyala_companion_ads.js" type="text/javascript" charset="utf-8"&gt;&lt;/script&gt;
    &lt;script src='//player.ooyala.com/v3/player_branding_id'&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;s
    &lt;div id='player' style='width:640px;height:360px'&gt;&lt;/div&gt;
    &lt;!--IMPORTANT: Don't forget to include a div element for you companion ad--&gt;
    &lt;div id='companion1'&gt;&lt;/div&gt;
    &lt;div id='OOYALA_DEBUG_CONSOLE' style='width:90%;height:400px;color:red;overflow:scroll'&gt;&lt;/div&gt;
    &lt;script&gt;
        OO.ready(function() {
            window.pp = OO.Player.create('player', "embed_code", {
                onCreate: function(player) {
                    //this is the VAST specific code
                    player.mb.subscribe(OO.EVENTS.WILL_SHOW_COMPANION_ADS, 'example', function(eventName, ads_objects) {
                        ooyalaVASTCompanionAds.ooyalaShowVASTCompanionAd('companion1', ads_objects["ads"][0], '120px', '60px');
                    });
                    //end of VAST specific code
                }
            });
        });
    &lt;/script&gt;
    &lt;noscript&gt;
        &lt;div&gt;Please enable Javascript to watch this video&lt;/div&gt;
    &lt;/noscript&gt;
&lt;/body&gt;

&lt;/html&gt;</pre>
</div>

   </div>

 </div>

  <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a class="link" href="ads_integration_overview.html">Client Side Ad Integration</a></div>
<div><a class="link" href="book_ads_integration.html" title="This documentation describes how to set up integrations for ad servers, ad networks, and ad management platforms for Player V3.">Player V3 Ad Integration</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br/>
<div><a class="link" href="../reference/ads_ref_vast.html" title="Pass VAST ad server or network tags to the Ooyala player.">VAST Ads Embedded Parameters in Player V3 (Deprecated)</a></div>
</div>
</div>

</body>
</html>