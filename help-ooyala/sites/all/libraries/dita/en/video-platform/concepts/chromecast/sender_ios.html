<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Build a Sender Application for iOS"/>
<meta name="DC.Relation" scheme="URI" content="../../concepts/chromecast/integrate.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="chromecast_sender_ios"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="../../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../css/ooyala.css"/>
<title>Build a Sender Application for iOS</title>
</head>
<body id="chromecast_sender_ios">


  <h1 class="title topictitle1">Build a Sender Application for iOS</h1>

  <div class="body conbody">
     <div class="section">Review the following content for information about creating an integrated Chromecast
      sender application using the Ooyala Mobile SDK for iOS.</div>

    <div class="section"><h2 class="title sectiontitle">Step 1: Set Up Your Environment</h2><div class="note note"><span class="notetitle">Note:</span> Your system must be running iOS
        version 6 or newer.</div>
<ol class="ol">
        <li class="li">Download the Ooyala SDK for iOS from the <a class="xref" href="../../../../../../../../downloads.html">Ooyala Mobile and Client SDKs Downloads Page</a>.</li>

        <li class="li">Download the Cast SDK for iOS.</li>

        <li class="li">Download the <a class="xref" href="https://github.com/ooyala/ios-sample-apps/tree/stable/ChromecastSampleApp" target="_blank">ChromecastSampleApp</a> from the Ooyala
          SDK for iOS Sample Apps repository.</li>

        <li class="li">Install the iOS Sender API libraries for GoogleCastFramework 2.2.1 or later on your
          system (see <a class="xref" href="https://developers.google.com/cast/docs/ios_sender" target="_blank">https://developers.google.com/cast/docs/ios_sender</a>).</li>

        <li class="li">Review the <a class="xref" href="https://developers.google.com/cast/docs/ios_sender" target="_blank">iOS sender application development details</a> on the
          Google Developers portal.</li>

      </ol>
 The sender includes the following classes: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" id="d265250e61">Class</th>

              <th class="entry" valign="top" id="d265250e64">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" headers="d265250e61 d265250e64 "><samp class="ph codeph">OOCastPlayer</samp></td>

              <td class="entry" valign="top" headers="d265250e61 d265250e64 ">The interface between Chromecast device and sender app. It is the object that
                sends/receives messages. It listens to the action from Ooyala CoreSDK and send the
                action to the receiver app, and it also listens to the message from the receiver app
                and transfers it to Ooyala Core SDK.</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" headers="d265250e61 d265250e64 "><samp class="ph codeph">OOCastManager</samp></td>

              <td class="entry" valign="top" headers="d265250e61 d265250e64 ">The interface between customer application/CoreSDK and the OOCastPlayer. It
                manages the switch between "cast mode" and "local playback mode" and all basic
                connections between the sender app and the chromecast device.</td>

            </tr>

          </tbody>

        </table>
</div>
</div>

    <div class="section"><h2 class="title sectiontitle">Step 2: Integrate with the Sender Application</h2> Use the following steps to
      integrate with the sender application <samp class="ph codeph">UIViewController</samp> with
        <samp class="ph codeph">OOOoyalaPlayer</samp> (where the <samp class="ph codeph">UIViewController</samp> in the sender
      application contains a player). <div class="note note"><span class="notetitle">Note:</span> The following code is based on the PlayerViewController
        class in the ChromecastSampleApp.</div>

      <ol class="ol">
        <li class="li"><strong class="ph b">Initial Configuration</strong>. Open the ChromecastSampleApp project in Xcode. <ul class="ul">
            <li class="li">Make sure you have -ObjC linker flag enabled.</li>

            <li class="li">Link the following libraries as static libraries:
              <pre class="pre codeblock">OoyalaSDK.framework
OoyalaCastSDK.framework
GoogleCast.framework
libz.dylib</pre>
</li>

          </ul>
</li>

        <li class="li"><strong class="ph b">Initialize the Cast Manager</strong>. Open OOCastManagerFetcher.m and specify your own App
          ID and NameSpace values: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
              <tbody class="tbody">
                <tr class="row">
                  <td class="entry" valign="top">App ID</td>

                  <td class="entry" valign="top">The ID you were given when you register the receiver app with which you are
                    trying to connect.</td>

                </tr>

                <tr class="row">
                  <td class="entry" valign="top">NameSpace</td>

                  <td class="entry" valign="top">The namespace to identify the protocol of the message being sent for the
                    related receiver app. <div class="note note"><span class="notetitle">Note:</span> The namespace should not be changed unless you
                      modify the receiver app source code.</div>
</td>

                </tr>

              </tbody>

            </table>
</div>
</li>

      </ol>
</div>
 
    <div class="section"><h2 class="title sectiontitle">Step 3: Configure the Mini Controller (Default) for iOS</h2> Review the
      following content for information about configuring the mini controller using the Ooyala
      mobile SDK for iOS. <ol class="ol">
        <li class="li">Open CustomizedMiniControllerView.m. Replace the values of <samp class="ph codeph">pauseImage</samp>
          and <samp class="ph codeph">playImage</samp> with your own. </li>

        <li class="li">Replace ooyala_logo.png with your own image.</li>

      </ol>
</div>

    
    <div class="section"><h2 class="title sectiontitle">Step 4: Customize the iOS Sender Application</h2></div>

    <div class="section">The customized sender is custom code that interacts with the Google
      Sender Cast SDK, Ooyala Mobile SDK and application UX/UI. You can customize the UI/UX of the
      sender application. The customized sender application loads on the primary device application
      running on desktop (Chrome) or mobile (iOS/Android) platforms. <ul class="ul">
        <li class="li">(Recommended) Uses Google Cast Custom Channel namespace to pass messages.</li>

        <li class="li">Uses the Cast Message Bus via Custom Channel to facilitate the following: <ul class="ul">
            <li class="li">Transmits the embed_code and player_branding_id to the receiver application for
              launch of the Ooyala Player V4.</li>

            <li class="li">Transmits basic player functions (stop, play, pause etc.) to the receiver
              application to control the Ooyala Player V4.</li>

            <li class="li">Via Custom Channel Listener, receives Ooyala related player errors based on player
              message bus events and translates them to application-friendly user messages. An
              example use case is if the Ooyala Device Management feature is used. The /last_Result
              messages are published in the player message bus and passed back to the sender; based
              on these results, the appropriate message is passed back to the application.</li>

          </ul>
</li>

      </ul>
</div>

    <div class="section">  
     <ol class="ol">
       <li class="li"><strong class="ph b">Customized Mini Controller</strong>. Open CustomizedMiniControllerView.m and adjust the
          values according to your application needs. The remaining steps apply to the customized
          mini controller. </li>

       <li class="li">Take the castManager as a property in your class.</li>

       <li class="li">Instantiate play/pause the casting video through [self.castManager.castPlayer play]/[self.castManager.castPlayer pause].</li>

       <li class="li">Update the play/pause button image.</li>

       <li class="li">Manage cast mode video view (The UIView fills in the blank video view in OOOoyalaPlayer when casting video).</li>

       <li class="li">Set the castModeVideoView in castManager as shown in the following code sample:
            <samp class="ph codeph">[self.castManager setCastModeVideoView:videoView];</samp> This view is
          displayed in the videoView of OOOoyalaPlayer when casting the video.</li>

     </ol>
     
    </div>

    <div class="section"><h2 class="title sectiontitle">Debugging a Sender Application</h2>
      <p class="p"> Use the function <samp class="ph codeph">printDebugMessage</samp> to dynamically debug the <a class="xref" href="https://developer.chrome.com/devtools" target="_blank">Chrome
        developer tools</a> console output about sender commands and Ooyala Player
        events. Media status objects can be monitored on the receiver debug console with the
        <samp class="ph codeph">MediaManager.customizedStatusCallback</samp> function. You can customize which events are
        reported to the logs and select to see errors from the Chromecast and/or Ooyala
        namespace.</p>

      <p class="p">Open a browser window and point it to the IP address of the Chromecast unit (port 9222).
        For more information on how to debug from this point, go to Google’s Chromecast
        Developer Guide topic on <a class="xref" href="https://developers.google.com/cast/docs/debugging" target="_blank">debugging</a> and Google's topic on <a class="xref" href="https://developers.google.com/cast/docs/reference/messages#MediaMess" target="_blank">handling Cast Media error messages</a>. </p>

    </div>

    <div class="section"><h2 class="title sectiontitle">OOCastManager Notifications</h2>
            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
                <thead class="thead" align="left">
                  <tr class="row">
                    <th class="entry" valign="top" id="d265250e278">Notification</th>

                    <th class="entry" valign="top" id="d265250e281">Description</th>

                  </tr>

                </thead>

                <tbody class="tbody">
                  <tr class="row">
                    <td class="entry" valign="top" headers="d265250e278 d265250e281 "><samp class="ph codeph">OOCastManagerFailToConnectNotification</samp></td>

                    <td class="entry" valign="top" headers="d265250e278 d265250e281 ">This notification is sent when a OOCastManager fails to connect to a
                      chromecast device.</td>

                  </tr>

                  <tr class="row">
                    <td class="entry" valign="top" headers="d265250e278 d265250e281 "><samp class="ph codeph">OOCastDeviceLostNotification</samp></td>

                    <td class="entry" valign="top" headers="d265250e278 d265250e281 ">This notification is sent when a chromecast device lost. It does not
                      mean the connection to the device was lost.</td>

                  </tr>

                  <tr class="row">
                    <td class="entry" valign="top" headers="d265250e278 d265250e281 "><samp class="ph codeph">OOCastManagerDidDisconnectNotification</samp></td>

                    <td class="entry" valign="top" headers="d265250e278 d265250e281 ">This notification is sent when a castManager disconnects from
                      chromecast device.</td>

                  </tr>

                  <tr class="row">
                    <td class="entry" valign="top" headers="d265250e278 d265250e281 "><samp class="ph codeph">OOCastEnterCastModeNotification</samp></td>

                    <td class="entry" valign="top" headers="d265250e278 d265250e281 ">This notification is sent when the app enters cast mode.</td>

                  </tr>

                  <tr class="row">
                    <td class="entry" valign="top" headers="d265250e278 d265250e281 "><samp class="ph codeph">OOCastExitCastModeNotification</samp></td>

                    <td class="entry" valign="top" headers="d265250e278 d265250e281 ">This notification is sent when the app exits cast mode.</td>

                  </tr>

                  <tr class="row">
                    <td class="entry" valign="top" headers="d265250e278 d265250e281 "><samp class="ph codeph">OOCastMiniControllerClickedNotification</samp></td>

                    <td class="entry" valign="top" headers="d265250e278 d265250e281 ">This notification is sent when a mini controller event is
                      activated.</td>

                  </tr>

                </tbody>

              </table>
</div>

    </div>

  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="integrate.html">Integrating with Chromecast</a></div>
</div>
</div>

</body>
</html>