<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Player Authorization API for Player V3"/>
<meta name="abstract" content="The Authorization API request is a key element of Ooyala's content protection features."/>
<meta name="description" content="The Authorization API request is a key element of Ooyala's content protection features."/>
<meta name="DC.Relation" scheme="URI" content="../concepts/authorization_overview.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="reference_zz5_y3c_jj"/>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../css/ooyala.css"/>
<title>Player Authorization API for Player V3</title>
</head>
<body id="reference_zz5_y3c_jj">


	<h1 class="title topictitle1">Player Authorization API for Player V3</h1>

	
		
	<div class="body refbody"><p class="shortdesc">The Authorization API request is a key element of Ooyala's content protection
		features.</p>

		<div class="section"><div class="note note"><span class="notetitle">Note:</span> This API applies to Player V3. For information on the Player Authorization API for Player V4,
				see <a class="xref" href="../api/player_v4_authorization_api.html" title="The Authorization API request is a key element in Ooyala's content protection features. This topic refers to Player V4.">Player Authorization API for Player V4</a>.</div>
</div>

<div class="section">
	<div class="p">A request to the Authorization API has the following syntax:
				<pre class="pre codeblock">[GET]/sas/player_api/v1/authorization/embed_code/pcode/ListOfCommaSeparatedEmbedCodes?query_string_paramters</pre>

			</div>
	
	<p class="p">
		Example:
</p>

	<pre class="pre codeblock">
http://player.ooyala.com/sas/player_api/v1/authorization/embed_code/R0Y3Y6HtBEQtRUoC55GY8DTF4pGA/44azdwNDpSWUvfd8F30d55tXY0YH9njH?device=html5&amp;domain=www.ooyala.com&amp;supportedFormats=m3u8%2Cmp4		
	</pre>

</div>

		<div class="section"><h2 class="title sectiontitle">Route Attributes</h2>
			
			<div class="p">The following table describes all attributes of the route.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_zz5_y3c_jj__table_mwz_25c_jj" class="table" frame="border" border="1" rules="all">
						
						
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" width="50%" id="d603189e59">Attribute</th>

								<th class="entry" valign="top" width="50%" id="d603189e62">Description</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e59 ">pcode</td>

								<td class="entry" valign="top" width="50%" headers="d603189e62 ">Your provider code</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e59 ">ListOfCommaSeparatedEmbedCodes</td>

								<td class="entry" valign="top" width="50%" headers="d603189e62 ">Embed codes (content IDs or asset IDs) must be separated by
									commas in this list.</td>

							</tr>

						</tbody>

					</table>
</div>
</div>

		</div>

		<div class="section"><h2 class="title sectiontitle"> Query String Parameters </h2>
			
			<div class="p">The following table describes the query string parameters of the routes. The request
				can have several optional query string parameters following in suit. The only
				required parameter is <samp class="ph codeph">domain</samp>.
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_zz5_y3c_jj__table_xfj_glc_jj" class="table" frame="border" border="1" rules="all">
						
						
						
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" width="33.33333333333333%" id="d603189e115">Parameter</th>

								<th class="entry" valign="top" width="33.33333333333333%" id="d603189e118">Description</th>

								<th class="entry" valign="top" width="33.33333333333333%" id="d603189e121">Required?</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e115 ">domain</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e118 ">Domain of the player embed.</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e121 ">Yes</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e115 ">timestamp</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e118 ">Timestamp in which the request was made (epoch
										time).<p class="p">Default: Time request received by
									server</p>
</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e121 ">No</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e115 ">supported_formats</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e118 ">List of comma-separated values indicating supported formats.
									The value of this parameter is normally tightly coupled with the
									device type, since support for formats is limited by device.
										<p class="p">Valid Values: Shown in table below</p>
</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e121 ">No</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e115 ">device</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e118 ">List of comma-separated devices for playback.<p class="p">Valid Values:
										See table below</p>
</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e121 ">No</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e115 ">jsonp</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e118 ">Value of this parameter will be used as the wrapper in
									returning JSONP. <p class="p">Default: JSON</p>
</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e121 ">No</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e115 ">embed_token</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e118 ">Discussed in section "Ooyala Player Token" in the <em class="ph i">Player Developer Guide</em>.
									</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e121 ">No</td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e115 ">auth_token</td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e118 ">Authorization token, discussed in <a class="xref" href="player_v3_concurrent_stream_limits.html" title="By default, your Ooyala Backlot provider account limits each viewer account to 2 concurrent streams. This feature discourages viewers from sharing their credentials with friends who don’t have accounts. If the viewer, or someone with their account credentials, tries to open an additional stream while the maximum number of streams is open, the player displays a message and refuses to open the stream. This default limit applies across all of the syndication groups (aka publishing rules) within your provider account. You change this limit, and you can enable or disable the limit on a per-group basis. You can also enable or disable this setting for the default group. You can change your Ooyala Backlot provider account limit. You can also set this type of limit at the asset level. For example, your provider account limit could be 3, and your asset-level limit could be 1. In this case, three friends or family members could log in using the same credentials and watch three different assets concurrently, but would be blocked from watching any particular asset concurrently.">Limiting Concurrent Streams per Viewer</a></td>

								<td class="entry" valign="top" width="33.33333333333333%" headers="d603189e121 ">No</td>

							</tr>

						</tbody>

					</table>
</div>
</div>

			</div>

		<div class="section"><h2 class="title sectiontitle">Supported Formats and Devices</h2>
			 The <samp class="ph codeph">supported_formats</samp>
			parameter can be a list of any of the following values, separated by commas. <div class="p">
				
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="reference_zz5_y3c_jj__table_ymx_smc_jj" class="table" frame="border" border="1" rules="all">
						
						
						<thead class="thead" align="left">
							<tr class="row">
								<th class="entry" valign="top" width="50%" id="d603189e259">Format</th>

								<th class="entry" valign="top" width="50%" id="d603189e262">Value</th>

							</tr>

						</thead>

						<tbody class="tbody">
							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">DASH</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">dash</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">HDS</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">hds</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">RTMP</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">RTMP</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">HLS</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">m3u8</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">MP4</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">mp4</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">Akamai HD</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">akamai_hd</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">Fairplay HLS</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">fps</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">Widevine HLS</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">wv_hls</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">Widevine MP4</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">wv_mp4</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">Widevine WVM</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">wv_wvm</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">Adobe Access HLS</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">faxs_hls</samp></td>

							</tr>

							<tr class="row">
								<td class="entry" valign="top" width="50%" headers="d603189e259 ">MicroSoft Smooth Streaming. <div class="note note"><span class="notetitle">Note:</span> For smooth streaming,
											<samp class="ph codeph">device</samp> (see below) must be
											<samp class="ph codeph">GENERIC</samp>.</div>
</td>

								<td class="entry" valign="top" width="50%" headers="d603189e262 "><samp class="ph codeph">smooth</samp></td>

							</tr>

						</tbody>

					</table>
</div>

			</div>
 The <samp class="ph codeph">device</samp> parameter can be a list of any of the following values,
			separated by commas: <ul class="ul">
				<li class="li"><samp class="ph codeph">IPHONE</samp></li>

				<li class="li"><samp class="ph codeph">IPAD</samp></li>

				<li class="li"><samp class="ph codeph">APPLE_TV</samp></li>

				<li class="li"><samp class="ph codeph">ANDROID_SDK</samp></li>

				<li class="li"><samp class="ph codeph">ANDROID_3PLUS_SDK</samp></li>

				<li class="li"><samp class="ph codeph">ANDROID_HLS_SDK</samp></li>

				<li class="li"><samp class="ph codeph">HTML5</samp></li>

				<li class="li"><samp class="ph codeph">GENERIC_FLASH</samp></li>

				<li class="li"><samp class="ph codeph">GENERIC</samp></li>

			</ul>

		</div>



<div class="section"><h2 class="title sectiontitle">Response from the Authorization API</h2>
	
<p class="p">When the caller makes an authorization request, the Authorization API responds to the caller with
				a JSON array indicating the authorization status for each of the embed codes
				included in the list in question. The following is a sample response from the
				Authorization API: </p>

	<pre class="pre codeblock">{  
   "debug_data":{  
      "server_latency":"21.919",
      "request_id":"domU-12-31-39-0B-D2-11_1346804527_57",
      "user_info":{  
         "ip_address":"204.124.203.201",
         "continent":"NORTH AMERICA",
         "country":"US",
         "request_timestamp":"1346804527",
         "language":"en-us",
         "device":"html5",
         "timezone":-7,
         "domain":"www.ooyala.com"
      }
   },
   "signature":"0pobcTRSLoiSZchrMI7Aeoub05/OKRIavq36BgW74lU=\n",
   "authorization_data":{  
      "44azdwNDpSWUvfd8F30d55tXY0YH9njH":{  
         "authorized":true,
         "message":"authorized",
         "code":"0",
         "request_timestamp":"1346804527",
         "retry":null,
         "streams":[  
            {  
               "delivery_type":"hls",
               "url":{  
                  "data":"aHR0cDovL3BsYXllci5vb3lhbGEuY29tL3BsYXllci9pcGhvbmUvNDRhemR3TkRwU1dVdmZkOEYzMGQ1NXRYWTBZSDluakgubTN1OA==",
                  "format":"encoded",
                  "token_expire":"1460744544"
               }
            }
         ]
      }
   }
}</pre>

</div>




<div class="section"><h2 class="title sectiontitle">
	Elements of the Response
</h2>
	
<p class="p">
The significant portions of the response are in boldface type in the sample. These parts of the response are: 
</p>

<ol class="ol">
	
<li class="li">debug_data is used only for debugging data. It can change at any time.</li>

<li class="li">signature in the response is used to ensure that the response has not been tampered with by a
					3rd party.</li>

<li class="li">streams are included if the embed code was authorized, including the base64 encoded url to access those streams. Each stream can return with an authorization result of:
<ul class="ul"><li class="li">"authorized"</li>

<li class="li">“unauthorized parent"</li>

<li class="li">"unauthorized domain"</li>

<li class="li">"unauthorized location"</li>

<li class="li">"unauthorized device"</li>

<li class="li">“current time is before the flight start time" (before flight start time)</li>

<li class="li">"current time is after the flight end time" (after flight end time)</li>

<li class="li">"current time is outside any availability period" (outside recurring flight times)</li>

<li class="li">"this is not a recognized embed code"</li>

<li class="li">"invalid signature" (invalid signature in the request, potentially when using token based playback)</li>

<li class="li">"missing parameters" (required parameters are missing)</li>

<li class="li">"missing rule set" (when authorizing using a rule set rather than a syndication group)</li>

<li class="li">“unauthorized” (this message rarely, if ever, used, in favor of more specific messages)</li>

<li class="li">"missing pcode",</li>

<li class="li">"invalid token" (error code for token based playback and Adobe Pass)</li>

</ul>

</li>

</ol>

<p class="p">
	For response that includes a Widevine stream, the additional property <samp class="ph codeph">widevine_server_path</samp> is returned.
	This value should be passed along with the stream URL to the playback SDKs for obtaining the Widevine license and decrypting the token.
</p>

	<pre class="pre codeblock">{  
   "authorization_data":{  
      "huNWp2NjoCaCKrsV_wqBdcSw9P1XmlwW":{  
         ... 
 "streams":[  
            {  
               "delivery_type":"wv_wvm",
               "url":{  
                  ...
               },
               "widevine_server_path":"http://player.ooyala.com/sas/drm2/lvcjAxOj82_rjlIAJ6Jr8ZZqGP-s/huNWp2NjoCaCKrsV_wqBdcSw9P1XmlwW/widevine/ooyala"
            }
         ]
      }
   },
   "debug_data":...,
   "signature":"Fo6ewzq2tTrLJrFmjo5eQpeKUOoLvhSen7KLjrFU1YQ=\n"
}</pre>

	<p class="p">For per-viewer concurrent stream limits, additional properties are returned, as detailed in
					<a class="xref" href="player_v3_concurrent_stream_limits.html" title="By default, your Ooyala Backlot provider account limits each viewer account to 2 concurrent streams. This feature discourages viewers from sharing their credentials with friends who don’t have accounts. If the viewer, or someone with their account credentials, tries to open an additional stream while the maximum number of streams is open, the player displays a message and refuses to open the stream. This default limit applies across all of the syndication groups (aka publishing rules) within your provider account. You change this limit, and you can enable or disable the limit on a per-group basis. You can also enable or disable this setting for the default group. You can change your Ooyala Backlot provider account limit. You can also set this type of limit at the asset level. For example, your provider account limit could be 3, and your asset-level limit could be 1. In this case, three friends or family members could log in using the same credentials and watch three different assets concurrently, but would be blocked from watching any particular asset concurrently.">Limiting Concurrent Streams per Viewer</a>.</p>

</div>

	</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="authorization_overview.html">Authorization</a></div>
</div>
</div>

</body>
</html>