<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Conviva Analytics Plugin"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="pbv4_analytics_conviva"/>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../css/ooyala.css"/>
<title>Conviva Analytics Plugin</title>
</head>
<body id="pbv4_analytics_conviva">


    <h1 class="title topictitle1">Conviva Analytics Plugin</h1>

     <div class="body conbody">
         <div class="section">Use the Player V4 Conviva analytics plugins (<samp class="ph codeph">conviva-core-sdk.min.js</samp> and <samp class="ph codeph">conviva.min.js</samp>) to
             track <a class="xref" href="http://http//www.conviva.com.html">Conviva</a> analytics for Ooyala Player V4.</div>
 
         <div class="section"><h2 class="title sectiontitle">Run-time Flow During Playback</h2>During playback, a playback event
            triggers notification about the event to Conviva Analytics. <div class="fig fignone">
                <img class="image" src="../image/pbv4_analytics_conviva.png"/>
            </div>
</div>

         <div class="section"><h2 class="title sectiontitle">Supported Players</h2>The Conviva plugin supports integrating Conviva
            with the Ooyala HTML5 web player versions 4.12.6 and above. The Conviva plugin works
            with all Player V4 video plugins.</div>

         <div class="section"><h2 class="title sectiontitle">Requirements</h2>
  If you want to track bitrate information for analytics purposes, you must use one of the following video plugins:
   <ul class="ul">
    <li class="li">Bitmovin plugin for DASH and HLS (<a class="xref" href="pbv4_resources.html#pbv4_resources__bitmovin_plugin">bit_wrapper.min.js</a>) (except HLS HTML5 in Safari)</li>

    <li class="li">Akamai HD video plugin for Akamai packaged HDS (<a class="xref" href="pbv4_resources.html#pbv4_resources__akamai_hd_plugin">akamaiHD_flash.min.js</a>)<div class="note note"><span class="notetitle">Note:</span>  The Akamai HD Video Plugin for Akamai Packaged HDS for Player
    V4 has been deprecated and is scheduled to be disabled. For details and alternatives, see the
     <a class="xref" href="../relnotes/2017-06-04.html">OVP Release Notes</a>.</div>
</li>

    <li class="li">OSMF Flash plugin for HDS (<a class="xref" href="pbv4_resources.html#pbv4_resources__flash_hds">osmf_flash.min.js</a>)<div class="note note"><span class="notetitle">Note:</span>  The OSMF Flash Video Plugin for HDS for Player V4 has been
    deprecated and is scheduled to be disabled. For details and alternatives, see the <a class="xref" href="../relnotes/2017-06-04.html">OVP Release Notes</a>. </div>
</li>

   </ul>
 
   The HLS and MP4 Main video plugin (<a class="xref" href="pbv4_resources.html#pbv4_resources__hls_mp4">main_html5.min.js</a>) does not report bitrate information.
   </div>

         <div class="section"><h2 class="title sectiontitle">Prerequisites</h2>Prior to using the Conviva plugin, you must contact
            your Conviva representative and request the following account information: <ul class="ul">
                <li class="li">your Conviva <span class="keyword parmname">customerKey</span></li>

                <li class="li">the <span class="keyword parmname">gatewayUrl</span> to use for your account</li>

            </ul>
You will need to specify these values when you embed Player V4 on a web page. </div>
          
        <div class="section"><h2 class="title sectiontitle">Where to Find the Plugins</h2>The latest version of the plugins are
            posted in the following path, where <strong class="ph b">LATEST_PLAYER_VERSION</strong> is the latest player
            version (4.12.6 and above):
            <pre class="pre codeblock">//player.ooyala.com/static/v4/stable/LATEST_PLAYER_VERSION/analytics-plugin/conviva-core-sdk.min.js
//player.ooyala.com/static/v4/stable/LATEST_PLAYER_VERSION/analytics-plugin/conviva.min.js</pre>
</div>

   
   <div class="section"><h2 class="title sectiontitle">Integration Steps</h2>To integrate using the Conviva plugins for Player V4:
                    <p class="p"><strong class="ph b">Step 1: Download and Host the Latest Conviva Plugins</strong></p>

       <div class="note note"><span class="notetitle">Note:</span> This applies only if you are self-hosting player resources, as described in <a class="xref" href="pbv4_host.html">Hosting Player V4 Resources</a>.</div>

       <ol class="ol">
                <li class="li">Download the latest version of the following plugins, where
                        <strong class="ph b">LATEST_PLAYER_VERSION</strong> is the latest player version (4.12.6 and
                    above).
                    <pre class="pre codeblock">player.ooyala.com/static/v4/stable/LATEST_PLAYER_VERSION/analytics-plugin/conviva-core-sdk.min.js
player.ooyala.com/static/v4/stable/LATEST_PLAYER_VERSION/analytics-plugin/conviva.min.js</pre>
</li>

                <li class="li">If you are self-hosting player resources, host the Conviva plugin as described in <a class="xref" href="pbv4_host.html">Hosting Player V4 Resources</a>.</li>

            </ol>
<p class="p"><strong class="ph b">Step 2: Add Conviva Integration on the Web Page</strong></p>
 Add the following
            scripts to the page on which you load the player. Be sure to load these plugins
                <em class="ph i">after</em> you load core.min.js.
                <pre class="pre codeblock">&lt;script src="url_where_hosted/conviva-core-sdk.min.js"&gt;&lt;/script&gt;
&lt;script src="url_where_hosted/conviva.min.js"&gt;&lt;/script&gt;</pre>
<div class="note note"><span class="notetitle">Note:</span> You
                must load conviva-core-sdk.min.js <em class="ph i">before</em> conviva.min.js.</div>

            <p class="p"><strong class="ph b">Step 3: Create the Player Using the Create Function</strong></p>
 Use the Player V4
            OO.Player.create function to create the player. For information on the create function,
            see <a class="xref" href="https://docs.brightcove.com/apidocs-ooyala/">docs.brightcove.com/apidocs-ooyala/</a>.
                    <p class="p"><strong class="ph b">Step 4: Specify Page-level Parameters for the Conviva Plugin</strong></p>

            Specify the following page-level parameters. 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="14.285714285714285%" id="d434737e187">Parameter</th>

                            <th class="entry" valign="top" width="14.285714285714285%" id="d434737e190">Type</th>

                            <th class="entry" valign="top" width="71.42857142857143%" id="d434737e193">Description</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e187 "><strong class="ph b">Required</strong></td>

                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e190 "> </td>

                            <td class="entry" valign="top" width="71.42857142857143%" headers="d434737e193 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e187 "><span class="keyword parmname">gatewayUrl</span></td>

                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e190 ">String</td>

                            <td class="entry" valign="top" width="71.42857142857143%" headers="d434737e193 ">URL used to report player statistics to Conviva Analytics. Issued
                                by Conviva.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e187 "><span class="keyword parmname">customerKey</span></td>

                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e190 ">String</td>

                            <td class="entry" valign="top" width="71.42857142857143%" headers="d434737e193 ">Customer key associated with your Conviva account. Issued by
                                Conviva.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e187 "><span class="keyword parmname">applicationName</span></td>

                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e190 ">String</td>

                            <td class="entry" valign="top" width="71.42857142857143%" headers="d434737e193 ">Name of the application to report to Conviva.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e187 "><strong class="ph b">Optional</strong></td>

                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e190 "> </td>

                            <td class="entry" valign="top" width="71.42857142857143%" headers="d434737e193 "> </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e187 "><span class="keyword parmname">customMetadata</span></td>

                            <td class="entry" valign="top" width="14.285714285714285%" headers="d434737e190 ">String</td>

                            <td class="entry" valign="top" width="71.42857142857143%" headers="d434737e193 ">Custom metadata to report to Conviva. List of key/value pairs
                                that you define. Examples: <ul class="ul">
                                    <li class="li">user statistics the site can track (age, gender, etc.)</li>

                                    <li class="li">other metadata (such as site category)</li>

                                </ul>
 Custom metadata is passed through to Conviva.</td>

                        </tr>

                    </tbody>

                </table>
</div>
</div>

     <div class="section"><h2 class="title sectiontitle">Example</h2>
        <pre class="pre codeblock">&lt;html&gt;
&lt;head&gt;
     &lt;title&gt;Conviva Analytics Plugin Example&lt;/title&gt;
     &lt;!-- V4 JS core is required. Plugins such as skin, discovery and advertising need to be loaded separately --&gt;
     &lt;script src= "url_where_hosted/core.min.js" &gt;&lt;/script&gt;
     &lt;script src= "url_where_hosted/html5-skin.min.js" &gt;&lt;/script&gt;
     &lt;link rel= "stylesheet" href= "url_where_hosted/html5-skin.min.css" /&gt;
     &lt;!-- A Video Plugin is required. This example shows the Main Video Plugin --&gt;
     &lt;script src= "url_where_hosted/main_html5.min.js" &gt;&lt;/script&gt;
     &lt;!-- Analytics Plugins --&gt;
     &lt;script src= "url_where_hosted/conviva.min.js" &gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
     &lt;div id= "container" style= "width:640px; height:360px;" &gt;&lt;/div&gt;
     &lt;script&gt;
         var playerParam = {
             "pcode" :  "YOUR_PCODE" ,
             "playerBrandingId" :  "YOUR_PLAYER_ID" ,
             "skin" : {
                 // Config contains the configuration setting for the player skin.
                 // Change to your local config when necessary.
                 "config" :  "url_where_hosted/skin.json"
             },
             <strong class="ph b">"conviva":{
                "gatewayUrl": "https://my-test.testonly.conviva.com",
                "customerKey": "abcde12345customerkey",
                "applicationName": "testAppName",
                "customMetadata": {"testKey": "testValue", "account":"myAccount", "test":"true"}
            }</strong>
         };
         OO.ready( function () {
             window.pp = OO.Player.create( "container" ,  "YOUR_ASSET_ID" , playerParam);
         });
     &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>

     </div>

     </div>

    

</body>
</html>