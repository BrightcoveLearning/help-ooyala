<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Player V3 LiveRail Ad Integration"/>
<meta name="DC.Relation" scheme="URI" content="../reference/ads_ref_liverail.html"/>
<meta name="DC.Relation" scheme="URI" content="ads_integration_overview.html"/>
<meta name="DC.Relation" scheme="URI" content="../concepts/book_ads_integration.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="ads_dev_liverail"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../css/ooyala.css"/>
<title>Player V3 LiveRail Ad Integration</title>
</head>
<body id="ads_dev_liverail">


    <h1 class="title topictitle1">Player V3 LiveRail Ad Integration</h1>


    <div class="body conbody">
        <div class="section"><h2 class="title sectiontitle">Overview</h2>
            <p class="p">LiveRail ad sets can be associated with an asset or multiple assets. This
                documentation describes the LiveRail integration with Player V3. LiveRail VAST ads
                are supported in Player V4. For documentation on the LiveRail integration with
                Player V4, see <a class="xref" href="pbv4_ads_dev_chapter_vast.html">VAST and VPAID Ad Plugin</a>.</p>

           
           
        </div>

        <div class="section"><h2 class="title sectiontitle">Prerequisites</h2>
            
            <p class="p">To use Ooyala's LiveRail ad integrations, log into the <a class="xref" href="../../../../../../../contact.html" target="_blank">Customer Portal</a> and submit a
                ticket requesting that this ad source be added to your account. Once it's enabled
                you'll be able to create ad sets for LiveRail.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Step 1: Create a LiveRail Ad Set</h2>
            <p class="p">Follow these steps to integrate with LiveRail via ad sets: </p>

            <div class="p">For instructions on how to create an ad set using the Backlot UI, see <a class="xref" href="../tasks/monetization_ads_adsets_integratingadnetworks.html" title="Instead of using your own assets, you can work with other ad sources.">Creating Ad Sets for Integrating with Ad Sources</a>. For
                instructions on how to create an ad set programmatically, see <a class="xref" href="../api/ad_sets.html" title="Ad sets are ad configurations that control the ad experience of an asset during playback.">Ad Sets</a>.<div class="note note"><span class="notetitle">Note:</span> You will see three
                    LiveRail options when creating an ad set. Choose the "LiveRail" option. This
                    integration can handle both in-stream and overlay ads via the LiveRail ads
                    manager.</div>
</div>

                    <div class="p">The <strong class="ph b">required ad set fields</strong> for creating a LiveRail ad set are: <ul class="ul">
                    <li class="li"><em class="ph i">Ad Set name</em>: You will enter a name for the ad set. </li>

                    <li class="li"><em class="ph i">Publisher ID</em>: A unique account value provided by LiveRail.</li>

                    <li class="li"><em class="ph i">Use Custom Metadata</em>: You will set this to <strong class="ph b">Yes</strong> to enable the ad
                        manager to pass LiveRail run-time parameters via the ad manager. </li>

                </ul>
</div>

            <div class="p">The <strong class="ph b">optional fields</strong> for creating a LiveRail ad set are: 
            <ul class="ul">
                <li class="li"><em class="ph i">Partner IDs</em>: If you are syndicating your content to a partner and are
                        loading a unique ad set for each partner, include a value here. You must
                        create the Partner ID in Liverail if you want to use this value. </li>

                <li class="li"><em class="ph i">Tags</em>: You could add comma-separated keywords describing the video content
                        here. These tags will be included as targeting run-time parameters for
                            <strong class="ph b">all</strong> ad requests associated with the LiveRail ad set. </li>

                <li class="li"><em class="ph i">Ad Map</em>: The default ad map setting for LiveRail is a single pre-roll. If
                        you would like to apply a different ad map, this value may be updated. For
                        example, adding the value in::0;ov::5,35 to this field would include a
                        pre-roll starting at 0 seconds and an overlay from 5 seconds to 35 seconds
                        during playback. Whatever values you add here will apply to <strong class="ph b">all</strong>
                        videos with which the LiveRail ad manager is associated. </li>

            </ul>

            <div class="note note"><span class="notetitle">Note:</span> The Tracking Pixel URL field is not relevant for the LiveRail ad manager integration. Leave this field blank.</div>
</div>

           </div>

        <div class="section"><h2 class="title sectiontitle">Step 2: Assign the LiveRail Ad Set to an Asset or Multiple Assets </h2>
            
            <p class="p">You can assign an ad set to an asset or multiple assets using the Backlot UI, Player
                API, or Backlot API.</p>

            <p class="p"><strong class="ph b">Backlot UI</strong>: For instructions on how to assign your LiveRail ad set to a single
                asset, see <a class="xref" href="../tasks/asset_manage_monetization.html" title="You can monetize your content using advertisements or create a pay-per-view experience using paywalls.">Managing Monetization</a>. For instructions on how to assign your LiveRail
                ad set to multiple assets, see <a class="xref" href="../tasks/asset_bulk.html" title="You can use the Backlot UI to apply settings to more than one asset at a time.">Bulk Applying Settings</a>.</p>

            <p class="p"><strong class="ph b">Player API</strong>: With the Player API you can only associate an ad set with an asset
                on your web page. To associate an ad set with an asset on multiple players you must
                replicate the code for each player. To associate an ad set with an asset using the
                Player API, see <a class="xref" href="player_v3_dev_assignadset.html" title="The player enables you to assign ad sets dynamically.">Assigning Ad
                    Sets Dynamically</a>.</p>

            <p class="p"><strong class="ph b">Backlot API</strong>: With the Backlot API you can associate an ad set with an asset
                more concretely. That is, when you associate an asset with an ad set using the
                Backlot API the asset and the ad set will be paired together on any player and page
                you play the asset on. To associate an asset with an ad set using the Backlot API,
                see <a class="xref" href="../api/asset_ad_set.html" title="You can associate ad sets with videos, live streams, and remote assets. For information about creating ad sets, refer to the Backlot User Guide.">Associate Ad Set with
                    Asset</a>.</p>

        </div>

        <div class="section"><h2 class="title sectiontitle">Step 3: Assign Targeting and Run-Time Parameters</h2>
            
            <p class="p">The Liverail ad manager uses run-time parameters to enable content targeting. As an
                example, you could target specific ads to run only on news and sports videos. Or,
                you could allow only one advertiser to run on a particular set of videos -- maybe
                Ford bought all the ad space (“inventory”) on car-related videos, for instance. The
                run-time parameters are identifiable by the prefix <var class="keyword varname">"LR_"</var> and can
                be added via Backlot or directly to your web page. </p>

            <p class="p">To see a full list of available run-time parameters, go to <a class="xref" href="http://platform4.liverail.com/auth/index/lastUrl/http%253A%252F%252Fsupport.liverail.com%252Ftechnical-docs%252Frun-time-parameters-specification" target="_blank">LiveRail's Support Center</a>.</p>

            <div class="p">
                <div class="note note"><span class="notetitle">Note:</span> The LiveRail ad manager automatically ingests and passes the following
                        <var class="keyword varname">LR_params</var> with every ad request: <ul class="ul">
                        <li class="li"><var class="keyword varname">LR_TITLE</var></li>

                        <li class="li"><var class="keyword varname">LR_PUBLISHER_ID</var></li>

                        <li class="li"><var class="keyword varname">LR_VIDEO_ID</var></li>

                    </ul>
</div>

            </div>

            <p class="p"><strong class="ph b">LR_ADMAP</strong></p>

            <p class="p">The standard way for defining when ads should play in video stream is by using the
                Liverail run-time parameter <var class="keyword varname">LR_ADMAP</var>. Full details on the format
                for this key/value pair are available in <a class="xref" href="http://platform4.liverail.com/auth/index/lastUrl/http%253A%252F%252Fsupport.liverail.com%252Ftechnical-docs%252Flr-admap-run-time-parameter" target="_blank">LiveRail's Support Center</a>. </p>

            <p class="p">The syntax for <var class="keyword varname">LR_ADMAP</var> is
                    <var class="keyword varname">LR_ADMAP=Type:Inventory_scenario_id:Time</var>.</p>

            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" id="d190734e252">Variable</th>

                            <th class="entry" valign="top" id="d190734e255">Input Based on Use Case</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" headers="d190734e252 d190734e255 ">Type</td>

                            <td class="entry" valign="top" headers="d190734e252 d190734e255 ">
                                <p class="p">For in-stream ads, set to "in".</p>

                                <p class="p">For overlay ads, set to "ov".</p>

                            </td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" headers="d190734e252 d190734e255 ">Inventory_scenario_id</td>

                            <td class="entry" valign="top" headers="d190734e252 d190734e255 ">The id value associated with a specific scenario.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" headers="d190734e252 d190734e255 ">Time</td>

                            <td class="entry" valign="top" headers="d190734e252 d190734e255 ">
                                <p class="p">For in-stream ads, set to "n", where n is either the number of
                                    seconds or the percentage of time into the content. Ex:
                                        <var class="keyword varname">LR_ADMAP</var>=in:test_scenario:100%. Ex:
                                        <var class="keyword varname">LR_ADMAP</var>=in::0</p>

                                <p class="p">For overlay ads, set to "n;m", where n is either the number of
                                    seconds into the content or percentage of time to start into
                                    content and m is either the number of seconds or percentage of
                                    time into content to stop the overlay. Ex:
                                        <var class="keyword varname">LR_ADMAP</var>=in::0;in::100%</p>

                            </td>

                        </tr>

                    </tbody>

                </table>
</div>

            <p class="p"><strong class="ph b">Add Parameters via Backlot UI</strong></p>

            <p class="p">In order for Custom metadata to be used as LiveRail runtime parameters, you will
                input the parameters as custom metadata key/value pairs on the Custom Metadata
                subtab on the MANAGE page for each asset. The 'Use Custom Metadata' dropdown needs
                to be set to 'Yes' on the LiveRail Ad Set associated to the videoFor instructions on
                how to add custom metadata to assets in Backlot, see <a class="xref" href="../tasks/metadata_create.html" title="You can add up to 100 name-value pairs to an asset.">Adding Custom Metadata</a>
                in the User Documentation.</p>

            <div class="p">This example shows targeting parameters you could input to target specific ads to run
                only on sports an news videos. <div class="fig fignone">
                    <img class="image" src="../image/liverail_runtime_params.png" height="166" width="493"/>
                </div>
</div>

            <p class="p">When the LiveRail ad manager is loaded, it automatically includes all of these custom
                metadata values when making subsequent ad requests. You can define which ads run
                where by creating ad targeting rules on the LiveRail platform.</p>

            <p class="p"/>
</div>

        <div class="section"><h2 class="title sectiontitle">Integrate the LiveRail Ad Manager with the Ooyala Player via Player Embedded
                Parameters</h2>
            
            <div class="note note"><span class="notetitle">Note:</span> Ad sets that are loaded at the page level will override the ad set associated with
                the asset in Backlot.</div>

            <p class="p"><strong class="ph b">Load LiveRail Ad Manager with OO.Player.create</strong></p>

            <p class="p">To load the ad manager programmatically, use <var class="keyword varname">OO.Player.create</var>. See
                    <a class="xref" href="../tasks/player_v3_dev_adsetoocreate.html" title="Player V3 enables you to assign ad sets dynamically with OO.Player.create and the adSetCode parameter.">Assigning an
                    Ad Set with OO.Player.create</a> for instructions on how to use
                OO.Player.create.</p>

            <div class="p">Here is a short example of how to load the LiveRail ad manager programmatically:
                <pre class="pre codeblock">  var videoPlayer =
  OO.Player.create("playerwrapper", "embed_code", {
    height: "100%",
    width: "100%",
    "liverail-ads-manager": {
        ...
    }
  });        </pre>
</div>

            <p class="p"/>

            <p class="p"> Here is a more robust example of LiveRail integration with the Ooyala Player on your
                web page. The player_branding_id of a player and the embed code of an asset can be
                found in the Embed tab on the MANAGE page of Backlot (the player_branding_id is in
                bold and the embed code is italicized in this example).</p>

            <pre class="pre codeblock">&lt;html&gt;

&lt;head&gt;
  &lt;script src="http://player.ooyala.com/v3/1217310cfc944c6abc338a459554666"&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;div id="ooyalaplayer" style="width:640px;height:360px"&gt;&lt;/div&gt;
  &lt;script&gt;
    OO.ready(function () {   
      OO.Player.create("ooyalaplayer", "MxcTUxNTplNGXE5aAnKFdon1e6h9CB_a", {
        "liverail-ads-manager": {
          "LR_PUBLISHER_ID": "1331"
        },
        onCreate: function (player) {
            ...
        },

      }); 
    });
  &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</pre>

            <p class="p"> </p>

        </div>

        <div class="section">
            <p class="p"><strong class="ph b">Add Parameters Directly to Your Web Page</strong></p>

            <p class="p">To add additional LiveRail run-time or targeting parameters directly to your web
                page, use <var class="keyword varname">OO.Player.create</var>. See <a class="xref" href="../tasks/player_v3_dev_adsetoocreate.html" title="Player V3 enables you to assign ad sets dynamically with OO.Player.create and the adSetCode parameter.">Assigning an Ad
                    Set with OO.Player.create</a> for instructions on how to use
                OO.Player.create.</p>

            <div class="p">Here is an example of adding additional LiveRail run-time parameters
                programmatically:
                <pre class="pre codeblock">&lt;script&gt;
  OO.ready(function () {
    OO.Player.create("container", EMBED_CODE, {
      "liverail-ads-manager": {
        LR_PUBLISHER_ID: "1331",
        LR_TAGS: "demo",
        LR_ADMAP: "in::0;in::100"
      }
    });
  });
&lt;/script&gt;        </pre>
</div>

        </div>

        <div class="section"/>

         
        <div class="section"><h2 class="title sectiontitle">LiveRail and Mobile</h2>
            
            <p class="p">To serve ads using LiveRail for mobile environments, you should download your
                LiveRail account VAST tag from your LiveRail account. The tag will look something
                like this:</p>

            <p class="p">http://ad4.liverail.com/?LR_ORDER_ID=12345&amp;LR_ORDER_LINE_ID=345677&amp;LR_PUBLISHER_ID=13517&amp;LR_SCHEMA=vast2&amp;LR_URL=[URL]</p>

            <p class="p">This tag is effectively a VAST wrapper, meaning that it will make an ad request to
                LiveRail, and LiveRail will make subsequent ad calls to whatever ad sources you have
                defined in your LiveRail account. Once you’ve downloaded the VAST tag, you should
                integrate it into your mobile app environment(s) using our Ooyala mobile SDKs. For
                more information about VAST, see <a class="xref" href="ads_dev_vast.html">Integrating VAST Ads with Player V3</a>. See <a class="xref" href="../reference/adset_fields_liverail.html" title="The fields described here are for Backlot ad sets with ad source set to LiveRail in the Backlot UI."> Ad Set
                        Fields for LiveRail</a> for descriptions of the fields you can input when
                creating a LiveRail ad set with VAST. </p>

        </div>

    </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a class="link" href="ads_integration_overview.html">Client Side Ad Integration</a></div>
<div><a class="link" href="book_ads_integration.html" title="This documentation describes how to set up integrations for ad servers, ad networks, and ad management platforms for Player V3.">Player V3 Ad Integration</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong><br/>
<div><a class="link" href="../reference/ads_ref_liverail.html">LiveRail Ads Embedded Parameters in Player V3 (Deprecated)</a></div>
</div>
</div>

</body>
</html>