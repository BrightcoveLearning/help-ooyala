<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Updating an Existing Application with the iOS Skin"/>
<meta name="abstract" content=""/>
<meta name="description" content=""/>
<meta name="DC.Relation" scheme="URI" content="../concepts/ios_v4_gettingthesdk.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="ios_v4_sample_app_steps"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../css/ooyala.css"/>
<title>Updating an Existing Application with the iOS Skin</title>
</head>
<body id="ios_v4_sample_app_steps">


  <h1 class="title topictitle1">Updating an Existing Application with the iOS Skin</h1>

  
  <div class="body taskbody"><p class="shortdesc"> </p>

    <div class="section context">
      <p class="p">You can use the new iOS skin to update an existing application. Below is a walkthrough that
        illustrates how to integrate the iOS skin into the <strong class="ph b">BasicPlaybackSampleApp</strong>.</p>

    </div>

    <ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">If you have not already done so, download and unzip the <a class="xref" href="../../../../../../../downloads.html">latest
            version of the Ooyala mobile SDK</a> for iOS. Also download the <a class="xref" href="http://static.ooyala.com.s3.amazonaws.com/sdk/ios/release/OoyalaSkinSDK-iOS.zip" target="_blank">Ooyala Skin SDK for iOS</a> which contains a necessary framework.
          Finally, clone the <strong class="ph b">ios-sample-apps</strong> repository by entering the following
          command:</span>
         
          <pre class="pre codeblock">git clone https://github.com/ooyala/ios-sample-apps.git</pre>

        
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">From the cloned <strong class="ph b">ios-sample-apps</strong> directory, go into the
            <strong class="ph b">BasicPlaybackSampleApp</strong> subdirectory. Open the
            <strong class="ph b">BasicPlaybackSampleApp.xcodeproj</strong> file in XCode.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Add the <strong class="ph b">JavascriptCore</strong>, <strong class="ph b">Social</strong>, and <strong class="ph b">MessageUI</strong> frameworks. For
          example, to do this for <strong class="ph b">JavascriptCore</strong>, click on the <strong class="ph b">BasicPlaybackSampleApp</strong>
          project (blue icon) in the top-lefthand corner. Go to the <em class="ph i">Linked Frameworks and
            Libraries</em> section. Click the <samp class="ph codeph">+</samp> plus button to add a new framework.
          Scroll down to find and add the <strong class="ph b">JavascriptCore.framework</strong> framework.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Add <strong class="ph b">libz.tbd</strong>, a zip compression library. To do this, in the project, go to the
            <em class="ph i">Build Phases</em> tab. Under the <strong class="ph b">Link Binary With Libraries</strong> section, press the
            <samp class="ph codeph">+</samp> plus button. Search for and add <strong class="ph b">libz.tbd</strong>.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Add the <strong class="ph b">OoyalaSkinSDK.framework</strong> framework. The easiest way to do this is by
          dragging the framework into a suitable folder in the lefthand column. Make sure that the
          "Copy items if needed" box is checked. If necessary, add the folder's path to the
            <strong class="ph b">Framework Search Paths</strong> slot under <strong class="ph b">Build Settings</strong> in the <strong class="ph b">Search Paths
            Settings</strong>. To add a new framework search path, click on the slot, add a colon :
          (separated by spaces) after the existing paths, and then insert the new path.</span>
      </li>
<li class="li step stepexpand"><span class="ph cmd">Go to the <em class="ph i">Build Settings</em> tab. Under the <em class="ph i">Linking</em> section, add
            <samp class="ph codeph">-ObjC</samp> to the slot that says "Other Linker
          Flags".</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Drag the <strong class="ph b">main.jsbundle</strong> file from the <strong class="ph b">OoyalaSkinSDK-iOS</strong> directory into the
            <strong class="ph b">BasicPlaybackSampleApp</strong> &gt; <strong class="ph b">Players</strong> directory structure on the lefthand
          column of the Xcode project. Make sure that the "Copy items if needed" box is
          checked.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">You can make your own skin configuration files. Alternately, there is a
            <strong class="ph b">skin-config</strong> subdirectory in the <strong class="ph b">OoyalaSkinSDK-iOS</strong> folder. From your skin
          configuration files, drag the <strong class="ph b">en.json</strong>, <strong class="ph b">es.json</strong>, <strong class="ph b">zh.json</strong>, and
            <strong class="ph b">skin.json</strong> files into the <strong class="ph b">Players</strong> directory. Make sure that the "Copy items
          if needed" box is checked.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">In <strong class="ph b">BasicPlaybackSampleApp</strong> &gt; <strong class="ph b">Players</strong> &gt;
            <strong class="ph b">BasicSimplePlaybackViewController.m</strong>, change <samp class="ph codeph">#import
            &lt;OoyalaSDK/OOOoyalaPlayerViewController.h&gt;</samp> to <samp class="ph codeph">#import
            &lt;OoyalaSkinSDK/OOSkinViewController.h&gt;</samp>.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Add <samp class="ph codeph">#import &lt;OoyalaSDK/OODiscoveryOptions.h&gt;</samp> and <samp class="ph codeph">#import
            &lt;OoyalaSkinSDK/OOSkinOptions.h&gt;</samp> to the list of imports.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">In the same file, replace all instances of
            <samp class="ph codeph">OOOoyalaPlayerViewController</samp> with
          <samp class="ph codeph">OOSkinViewController</samp>. This can be done by pressing <samp class="ph codeph">CMD +
            F</samp> and performing <em class="ph i">find and replace</em>.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Since <strong class="ph b">OOSkinViewController</strong> needs more information than just a player to be
          initialized, replace the line</span>
         <pre class="pre codeblock">self.ooyalaPlayerViewController = [[OOSkinViewController alloc] initWithPlayer:player];</pre>

          in the <samp class="ph codeph">-(void) viewDidLoad</samp> method
          with<pre class="pre codeblock">OODiscoveryOptions *discoveryOptions = [[OODiscoveryOptions alloc] initWithType:OODiscoveryTypePopular limit:10 timeout:60];
NSURL *jsCodeLocation = [[NSBundle mainBundle] URLForResource:@"main" withExtension:@"jsbundle"];
OOSkinOptions *skinOptions = [[OOSkinOptions alloc] initWithDiscoveryOptions:discoveryOptions jsCodeLocation:jsCodeLocation configFileName:@"skin" overrideConfigs:nil];
self.ooyalaPlayerViewController = [[OOSkinViewController alloc] initWithPlayer:player skinOptions:skinOptions parent:self.playerView  launchOptions:nil];</pre>

      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Drag the <strong class="ph b">Fonts</strong> folder inside of the <strong class="ph b">OoyalaSkinSDK-iOS</strong> directory into the
          root of the <strong class="ph b">BasicPlaybackSampleApp</strong> XCode project. Make sure that the "Copy items if
          needed" box is checked. Also make sure that it is being copied as a group (not just a
          folder reference).</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Open <strong class="ph b">Supporting Files</strong> &gt; <samp class="ph codeph">Info.plist</samp>. Press the
            <samp class="ph codeph">+</samp> plus button by the <strong class="ph b">Information Property List</strong> slot to add a new
          field. Add a field with the key '<samp class="ph codeph">Fonts provided by application</samp>' (this can
          be found in the drop-down menu). Set the array elements to be the <strong class="ph b">ttf</strong> file names
          inside the <em class="ph i">Fonts</em> folder (i.e., <strong class="ph b">alice.ttf</strong> and
          <strong class="ph b">fontawesome-webfont.ttf</strong>).</span>
      </li>
<li class="li step stepexpand"><span class="ph cmd">Press the <samp class="ph codeph">PLAY</samp> button to build and run the app.</span></li>
</ol>

    <div class="example"><p class="p">To summarize, the following is the list of requirements for Ooyala Skin SDK to work in your
        application:</p>

    <ul class="ul"><li class="li"><strong class="ph b">Ooyala SDK</strong>, <strong class="ph b">JavascriptCore</strong>, <strong class="ph b">Social</strong>, and <strong class="ph b">MessageUI</strong> should be
          linked.</li>

      <li class="li"><strong class="ph b">Ooyala Skin SDK</strong>
        <ul class="ul"><li class="li">Should be linked.</li>

          <li class="li">SDK version in the skin package's <strong class="ph b">VERSION</strong> file should match the <strong class="ph b">VERSION</strong>
              file in the Ooyala SDK.</li>
</ul>

      </li>

      <li class="li"><strong class="ph b">Fonts</strong>
      <ul class="ul">
        <li class="li">Should be bundled.</li>

        <li class="li">Should be part of <strong class="ph b">Info.plist</strong>.</li>

      </ul>
</li>

      <li class="li"><strong class="ph b">Localization Files</strong> (en.json, zh.json, etc.), <strong class="ph b">skin-config.json</strong>, and <strong class="ph b">main.jsbundle</strong> should be
          bundled.</li>

      <li class="li">Objective-C code should use the <strong class="ph b">OOSkinViewController</strong>, and it should use
            <strong class="ph b">main.jsbundle</strong> as the <strong class="ph b">jsCodeLocation</strong>.</li>

      <li class="li"><strong class="ph b">Other Linker Flags</strong> should be set to <samp class="ph codeph">-ObjC</samp>.</li>

    </ul>

    </div>

  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../concepts/ios_v4_gettingthesdk.html">Player Skin for iOS</a></div>
</div>
</div>

</body>
</html>