<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Returning Impression Events"/>
<meta name="abstract" content="Showing Ooyala Discovery recommendations to users through the API requires a call to Ooyala to report what results are displayed. The reported information is fed to the Discovery implementation to enhance recommendation algorithms and optimize the results for the site and audience."/>
<meta name="description" content="Showing Ooyala Discovery recommendations to users through the API requires a call to Ooyala to report what results are displayed. The reported information is fed to the Discovery implementation to enhance recommendation algorithms and optimize the results for the site and audience."/>
<meta name="DC.Relation" scheme="URI" content="../concepts/content_discovery_about_feedback_loop.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="cd_api_setup_impression_events"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../css/ooyala.css"/>
<title>Returning Impression Events</title>
</head>
<body id="cd_api_setup_impression_events">


  <h1 class="title topictitle1">Returning Impression Events</h1>

  
  <div class="body taskbody"><p class="shortdesc">Showing Ooyala Discovery recommendations to users through the API requires a call to
    Ooyala to report what results are displayed. The reported information is fed to the Discovery
    implementation to enhance recommendation algorithms and optimize the results for the site and
    audience.</p>

    <div class="section context"> For the best feedback, Ooyala recommends sending an impression event for each video
      displayed in recommendations. Impressions are part of the calculation of the <a class="xref" href="../concepts/cd_discovery_insights_report.html" title="Ooyala Discovery Insights reports provide a detailed view of key performance indicators (KPIs) for user engagement and growth.">Insights Report</a>. Capturing the
      detailed impression events improves the accuracy of analytics reports.<p class="p">Use the following
        steps to configure your implementation for recording impressions:</p>
</div>

    <ol class="ol steps"><li class="li step stepexpand">
        <span class="ph cmd">Set up a web page or app to show Ooyala Discovery recommendations.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Get the generated <samp class="ph codeph">device_id</samp>.</span>
         
          <p class="p">For Flash, the following example function gets the Flash device ID:</p>

          <pre class="pre codeblock">public function get deviceId():String {
            var so:SharedObject = SharedObject.getLocal("auth");
            var deviceId:String = so.data.auth ? so.data.auth : null;
            return (deviceId == null || deviceId == "") ? "unknown" : deviceId;
            }                                </pre>

          <div class="note note"><span class="notetitle">Note:</span> If the device ID is unavailable, the example function returns
              <samp class="ph codeph">unknown</samp>.</div>

        
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Add the <span class="keyword parmname">device_id</span> parameter.</span>
      </li>
<li class="li step stepexpand">
        <span class="ph cmd">Make a post request that contains the <span class="keyword parmname">bucket_info</span> parameter for
          each video that recommended and/or shown to the user. This step is shown in the following
          code sample:</span>
         
          <pre class="pre codeblock">[POST]/v2/discover/feedback/impression{  
"device_id":"<kbd class="ph userinput">device_id</kbd>",
"bucket_info":"<kbd class="ph userinput">bucket_info</kbd>",
“ui_tag”:”tag1”
}            </pre>

        
         
          <p class="p">Ooyala Discovery returns a 200 response.</p>

        
      </li>
</ol>

    <div class="section postreq">
      <div class="note note"><span class="notetitle">Note:</span>  Try out the code samples using your account credentials in the
            Ooyala Scratchpad. To launch the Scratchpad, go
            to <span class="ph">Ooyala <a class="xref" href="https://api.ooyala.com/docs/api_scratchpad" target="_blank">API Scratchpad</a></span>. For information about using the Scratchpad, see <a class="xref" href="../concepts/api_scratchpad.html" title="You can make practice requests on the scratchpad.">Practice Making Requests with the Scratchpad</a>. </div>

    </div>

  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../concepts/content_discovery_about_feedback_loop.html" title="Improve recommendations for your customers by feeding behavior activity from the user to Ooyala Discovery.">Discovery Feedback Loop</a></div>
</div>
</div>

</body>
</html>